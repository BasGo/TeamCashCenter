@namespace TeamCashCenter.Shared
@inherits ComponentBase

<div class="modal @(Visible?"show d-block":"")" tabindex="-1" style="@(Visible?"background: rgba(0,0,0,0.4);":"display:none;")">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">@Title</h5>
        <button type="button" class="btn-close" aria-label="Close" @onclick="()=>Close(false)"></button>
      </div>
      <div class="modal-body">
        @ChildContent
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" @onclick="()=>Close(false)">Cancel</button>
        <button class="btn btn-danger" @onclick="()=>Close(true)">Confirm</button>
      </div>
    </div>
  </div>
</div>

@code {
  [Parameter] public string Title { get; set; } = "Confirm";
  [Parameter] public RenderFragment? ChildContent { get; set; }
  public bool Visible { get; set; }
  [Parameter] public EventCallback<bool> OnClose { get; set; }

  public void Show() { Visible = true; StateHasChanged(); }
  public void Hide() { Visible = false; StateHasChanged(); }

  private async Task Close(bool result)
  {
    Visible = false;
    await OnClose.InvokeAsync(result);
  }
}
